<ion-header>
  <ion-navbar align="center">
    <ion-buttons left>
    <button ion-button icon-only class="add-note-segment">
      <ion-icon name="remove"></ion-icon>
    </button>
    </ion-buttons>
    <ion-title >
      Key Writer
    </ion-title>
    <ion-buttons right>
      <button ion-button icon-only class="add-note-segment">
        <ion-icon name="add"></ion-icon>
      </button>
      <button ion-button icon-only class="add-note-segment">
        <ion-icon name="git-branch"></ion-icon>
      </button>

    </ion-buttons>
  </ion-navbar>
</ion-header>

<ion-content>
  <div class="screen" id="screen">
    <div class="book">
      <div class="sheet" >
        <div *ngFor="let segment of segments; let segmentIndex = index"
             [ngClass]="'note-segment '+(currentSegmentIndex === segmentIndex ? 'selected-segment' : '')"
             (click)="selectSegment(segmentIndex)">
          <div [ngClass]="'left-margin ' + (segment.noteToggles[0] ? 'on' : 'off')"></div>
          <div *ngFor="let noteOfSegment of segment.noteToggles; let i = index"
               [ngClass]="'note-of-segment ' + (noteOfSegment ? 'on' : 'off') + ' '+
                  (notes[i].key.slice(-1) === '#' ? 'w-black' : 'w-'+notes[i].key) + (i !== notes.length-1 ? ' br' : '')">
            <!--{{notes[i].key}}-->
          </div>
          <div
              [ngClass]="'right-margin br ' + (segment.noteToggles[segment.noteToggles.length-1] ? 'on' : 'off')"></div>
            <div class="duration" (click)="changeDuration(segment)">
              <button ion-button icon-only>
                <svg version="1.1" id="Capa_1" xmlns="http://www.w3.org/2000/svg"
	 viewBox="0 0 290.281 290.281" style="enable-background:new 0 0 290.281 290.281;">
<path id="XMLID_958_" d="M205.367,0h-30v173.646c-6.239-2.566-13.111-3.922-20.305-3.922c-17.458,0-35.266,7.796-48.857,21.388
	c-25.344,25.343-28.516,63.407-7.072,84.853c9.232,9.232,22.016,14.316,35.995,14.316c17.458,0,35.266-7.796,48.857-21.388
	c11.843-11.843,19.308-26.842,21.018-42.234c0.244-2.198,0.355-4.38,0.355-6.537h0.01V0z"/>
</svg>

              </button>
            </div>
          </div>
      </div>
    </div>

    <div class="keyboard">
      <div class="top-keys">
        <div class="white-key left-margin" (click)="playNote(notes[0])"></div>
        <div *ngFor="let note of notes" col-1
             [ngClass]="(note.key.slice(-1) === '#') ? 'black-top-key' : 'white-top-key-'+note.key"
             (click)="playNote(note)">
          <!--{{note.key + note.octave}}-->
        </div>
        <div class="white-key right-margin br" (click)="playNote(notes[notes.length-1])"></div>
      </div>

      <div class="bottom-keys">
        <div class="bottom-key" *ngFor="let whiteBottomKey of whiteBottomKeys"
             (click)="playNote(whiteBottomKey)">
          <!--{{whiteBottomKey.key + whiteBottomKey.octave}}-->
        </div>
      </div>
    </div>
  </div>
</ion-content>
